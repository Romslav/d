<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–õ–æ—è–ª—å–Ω–æ—Å—Ç—å | –†–µ—Å—Ç–æ—Ä–∞–Ω</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
</head>
<body>
    <!-- Preloader -->
    <div id="preloader" class="preloader">
        <div class="spinner"></div>
        <p>–ó–∞–≥—Ä—É–∂–∞–µ–º –≤–∞—à—É –ª–æ—è–ª—å–Ω–æ—Å—Ç—å...</p>
    </div>

    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-left">
            <button id="menuBtn" class="nav-icon">‚ò∞</button>
        </div>
        <div class="nav-center">
            <h2 id="pageTitle">–õ–æ—è–ª—å–Ω–æ—Å—Ç—å</h2>
        </div>
        <div class="nav-right">
            <button id="notifBtn" class="nav-icon">üîî</button>
        </div>
    </nav>

    <!-- Main Content -->
    <main id="mainContent">
        <!-- –≠–ö–†–ê–ù 1: –ì–ª–∞–≤–Ω–∞—è -->
        <div id="dashboard" class="screen active">
            <div class="profile-header">
                <div class="avatar" id="avatar"></div>
                <div class="profile-info">
                    <h1 id="userName">–ò–≤–∞–Ω</h1>
                    <div class="status-badge" id="statusBadge">ü•â –ë—Ä–æ–Ω–∑–∞</div>
                </div>
            </div>

            <div class="balance-card">
                <div class="balance-value" id="balanceValue">1,240</div>
                <div class="balance-label">–±–∞–ª–ª–æ–≤ = <span id="rublesValue">1,240‚ÇΩ</span></div>
                <div class="progress-container">
                    <div class="progress-label">
                        –î–æ <span id="nextLevelName">–°–µ—Ä–µ–±—Ä–∞</span>: 
                        <span id="nextLevelPoints">760</span> –±–∞–ª–ª–æ–≤
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                </div>
            </div>

            <div class="quick-actions">
                <button class="action-btn primary" onclick="showScreen('checkin')">
                    üì∏ –ù–∞—á–∏—Å–ª–∏—Ç—å –±–æ–Ω—É—Å—ã
                </button>
                <button class="action-btn secondary" onclick="showScreen('spend')">
                    üí∞ –ü–æ—Ç—Ä–∞—Ç–∏—Ç—å –±–∞–ª–ª—ã
                </button>
                <button class="action-btn accent" onclick="showScreen('qr-card')">
                    ü™™ –ú–æ—è –∫–∞—Ä—Ç–∞
                </button>
            </div>

            <div class="next-reward">
                <div class="reward-icon">üéÅ</div>
                <div class="reward-text">
                    –ï—â–µ 2 –≤–∏–∑–∏—Ç–∞ ‚Äî –¥–µ—Å–µ—Ä—Ç –≤ –ø–æ–¥–∞—Ä–æ–∫!
                </div>
            </div>
        </div>

        <!-- –≠–ö–†–ê–ù 2: –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–æ–Ω—É—Å–æ–≤ -->
        <div id="checkin" class="screen">
            <div class="checkin-methods">
                <button class="method-btn active" data-method="qr">
                    <div class="method-icon">üì±</div>
                    <div>–ß–µ—Ä–µ–∑ –∫–∞—Å—Å—É (QR)</div>
                </button>
                <button class="method-btn" data-method="manual">
                    <div class="method-icon">üí≥</div>
                    <div>–í–≤–µ—Å—Ç–∏ —á–µ–∫ –≤—Ä—É—á–Ω—É—é</div>
                </button>
            </div>
            
            <div id="qrScanner" class="scanner-placeholder">
                <div class="scanner-frame"></div>
                <p>–ü–æ–∫–∞–∑–∞—Ç—å QR –∫–∞—Å—Å–∏—Ä—É</p>
            </div>
            
            <div id="manualInput" class="input-form hidden">
                <input type="text" id="checkAmount" placeholder="–°—É–º–º–∞ —á–µ–∫–∞, ‚ÇΩ" />
                <button class="btn-full primary" onclick="processManualCheck()">–ù–∞—á–∏—Å–ª–∏—Ç—å –±–æ–Ω—É—Å—ã</button>
            </div>
        </div>

        <!-- –≠–ö–†–ê–ù 3: –°–ø–∏—Å–∞–Ω–∏–µ -->
        <div id="spend" class="screen">
            <div class="spend-tabs">
                <button class="tab-btn active" data-tab="discount">–°–∫–∏–¥–∫–∞</button>
                <button class="tab-btn" data-tab="rewards">–ü–æ–¥–∞—Ä–∫–∏</button>
            </div>
            
            <div id="discountTab" class="tab-content active">
                <div class="slider-container">
                    <input type="range" id="discountSlider" min="50" max="1000" value="100" />
                    <div class="slider-value">
                        <span id="discountAmount">100</span> –±–∞–ª–ª–æ–≤ = <span id="discountRub">100‚ÇΩ</span>
                    </div>
                </div>
                <div id="discountQR" class="qr-code-lg"></div>
                <p class="qr-hint">–ü–æ–∫–∞–∂–∏—Ç–µ –∫–æ–¥ –Ω–∞ –∫–∞—Å—Å–µ</p>
            </div>
            
            <div id="rewardsTab" class="tab-content">
                <div class="rewards-grid">
                    <div class="reward-item" onclick="redeemReward('coffee')">
                        <div class="reward-img">‚òï</div>
                        <div>–ö–æ—Ñ–µ</div>
                        <div class="reward-cost">200 –±–∞–ª–ª–æ–≤</div>
                    </div>
                    <div class="reward-item" onclick="redeemReward('dessert')">
                        <div class="reward-img">üç∞</div>
                        <div>–î–µ—Å–µ—Ä—Ç</div>
                        <div class="reward-cost">400 –±–∞–ª–ª–æ–≤</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –≠–ö–†–ê–ù 4: –ú–æ—è –∫–∞—Ä—Ç–∞ -->
        <div id="qr-card" class="screen">
            <div class="card-header">
                <h3>–í–∞—à–∞ –∫–∞—Ä—Ç–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏</h3>
                <div class="status-large" id="statusLarge">ü•â –ë—Ä–æ–Ω–∑–∞</div>
            </div>
            <div id="loyaltyQR" class="qr-code-xl"></div>
            <div class="card-id">ID: <strong id="cardId">R-LOY-12345</strong></div>
            <p class="card-hint">–ü–æ–∫–∞–∂–∏—Ç–µ –Ω–∞ –∫–∞—Å—Å–µ –¥–ª—è –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –±–æ–Ω—É—Å–æ–≤</p>
        </div>

        <!-- –≠–ö–†–ê–ù 5: –ê–∫—Ü–∏–∏ -->
        <div id="promos" class="screen">
            <div class="promo-card active-promo">
                <div class="promo-icon">üéÇ</div>
                <div class="promo-content">
                    <h4>–î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è</h4>
                    <p>+500 –±–∞–ª–ª–æ–≤ –∑–∞ –≤–∏–∑–∏—Ç –≤ –≤–∞—à –î–†</p>
                    <div class="promo-timer">–û—Å—Ç–∞–ª–æ—Å—å: 15 –¥–Ω–µ–π</div>
                </div>
            </div>
            <div class="promo-card">
                <div class="promo-icon">√ó2</div>
                <div class="promo-content">
                    <h4>x2 –±–∞–ª–ª–æ–≤</h4>
                    <p>–ë—É–¥–Ω–∏ 12:00-16:00</p>
                </div>
            </div>
        </div>

        <!-- –≠–ö–†–ê–ù 6: –†–µ—Ñ–µ—Ä–∞–ª—ã -->
        <div id="referrals" class="screen">
            <div class="referral-stats">
                <div class="stat-item">
                    <div class="stat-number">5</div>
                    <div>–ü—Ä–∏–≥–ª–∞—à–µ–Ω–æ</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">3</div>
                    <div>–ê–∫—Ç–∏–≤–Ω–æ</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">600</div>
                    <div>–ë–∞–ª–ª–æ–≤</div>
                </div>
            </div>
            <div class="referral-link">
                <div class="link-text">t.me/RestBot?start=ref12345</div>
                <button class="btn-share" onclick="shareReferral()">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
            </div>
        </div>

        <!-- –≠–ö–†–ê–ù 7: –ò—Å—Ç–æ—Ä–∏—è -->
        <div id="history" class="screen">
            <div class="history-filters">
                <button class="filter-btn active" data-filter="all">–í—Å–µ</button>
                <button class="filter-btn" data-filter="add">–ù–∞—á–∏—Å–ª–µ–Ω–∏—è</button>
                <button class="filter-btn" data-filter="spend">–°–ø–∏—Å–∞–Ω–∏—è</button>
            </div>
            <div id="historyList" class="history-list">
                <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è JS -->
            </div>
        </div>

        <!-- –≠–ö–†–ê–ù 8: –ü—Ä–æ—Ñ–∏–ª—å -->
        <div id="profile" class="screen">
            <div class="profile-form">
                <div class="form-group">
                    <label>–¢–µ–ª–µ—Ñ–æ–Ω</label>
                    <input type="tel" id="phoneInput" placeholder="+7 (999) 123-45-67">
                </div>
                <div class="form-group">
                    <label>–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</label>
                    <input type="date" id="birthdayInput">
                </div>
                <label class="checkbox-group">
                    <input type="checkbox" id="notifications" checked>
                    <span class="checkmark"></span>
                    –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∞–∫—Ü–∏—è—Ö
                </label>
                <button class="btn-full primary" onclick="saveProfile()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
    </main>

    <!-- Bottom Navigation -->
    <div class="bottom-nav">
        <button class="nav-item active" data-screen="dashboard">
            <div class="nav-icon">üè†</div>
            <div>–ì–ª–∞–≤–Ω–∞—è</div>
        </button>
        <button class="nav-item" data-screen="promos">
            <div class="nav-icon">üéÅ</div>
            <div>–ê–∫—Ü–∏–∏</div>
        </button>
        <button class="nav-item" data-screen="qr-card">
            <div class="nav-icon">ü™™</div>
            <div>–ö–∞—Ä—Ç–∞</div>
        </button>
        <button class="nav-item" data-screen="referrals">
            <div class="nav-icon">üë•</div>
            <div>–î—Ä—É–∑—å—è</div>
        </button>
        <button class="nav-item" data-screen="profile">
            <div class="nav-icon">üë§</div>
            <div>–ü—Ä–æ—Ñ–∏–ª—å</div>
        </button>
    </div>

    <script src="data.js"></script>
    <script src="app.js"></script>
</body>
</html>
